<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#0b0f19">
  <title>Enerpad AC è¡Œå‹•é›»æºä½¿ç”¨æ™‚é–“è©¦ç®—</title>
  <style>
    :root{
      --bg:#0b0f19;         /* èƒŒæ™¯ */
      --card:#121829;       /* å¡ç‰‡åº•è‰² */
      --muted:#9aa4b2;      /* æ¬¡è¦æ–‡å­— */
      --accent:#3d8bff;     /* é‡é»è— */
      --accent-hover:#2f78e6;
      --field:#1a2238;      /* è¼¸å…¥åº•è‰² */
      --stroke:#1f2a44;     /* é‚Šæ¡†è‰² */
      --warn:#ff5c5c;       /* è­¦ç¤ºç´… */
      --text:#e6edf7;       /* ä¸»æ–‡å­— */
      --highlight:#ffcc00;  /* å¼·èª¿é»ƒ */
    }

    /* è‡ªå‹•ä¾è£ç½®æœ€ä½³åŒ–ï¼šæ’ç‰ˆã€å­—ç´šã€é–“è· */
    html { -webkit-text-size-adjust: 100%; }
    body {
      font-family: Arial, system-ui, -apple-system, "Noto Sans TC", sans-serif;
      background-color: var(--bg); color: var(--text);
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh; margin: 0;
      padding: max(16px, env(safe-area-inset-top)) max(16px, env(safe-area-inset-right)) max(16px, env(safe-area-inset-bottom)) max(16px, env(safe-area-inset-left));
    }
    .container {
      background: var(--card);
      padding: 24px; border-radius: 16px; width: 100%;
      max-width: clamp(340px, 92vw, 520px);
      box-shadow: 0 6px 24px rgba(0,0,0,.55);
      border: 1px solid var(--stroke);
      box-sizing: border-box;
    }

    h2 { text-align:center; margin:0 0 16px; color: var(--accent); font-size: clamp(20px, 2.6vw, 24px); line-height:1.35; }
    label { display:block; margin: 10px 0 6px; font-size: 14px; }
    select, input[type="number"], input[readonly]{
      width:100%; padding:12px; border-radius:12px; border:1px solid var(--stroke);
      background: var(--field); color: var(--text); margin-bottom:10px; font-size:16px; /* 16px é¿å… iOS æ”¾å¤§ */
      outline: none; box-sizing: border-box;
    }
    input[type="number"] { -moz-appearance: textfield; }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

    .actions { display:flex; flex-direction: column; gap:10px; margin-top:8px; }
    @media (min-width: 480px){ .actions{ flex-direction: row; } }

    button{ flex:1; padding:12px; border:none; border-radius:12px; cursor:pointer; font-size:16px; box-sizing: border-box; }
    .calculate{ background: var(--accent); color:#fff; font-weight:700 }
    .calculate:hover{ background: var(--accent-hover) }
    .reset{ background:#0f1729; color:#e6edf7; border:1px solid var(--stroke) }
    .reset:hover{ background:#0d1422 }

    .result{ margin-top:14px; padding:14px; border-radius:12px; background: var(--field); text-align:center; border:1px solid var(--stroke); box-sizing: border-box; }
    .result strong{ color: var(--accent) }
    .highlight{ font-weight:700; color: var(--highlight) }

    details{ margin-top:14px; background: var(--field); padding:12px; border-radius:12px; border:1px solid var(--stroke); box-sizing: border-box; }
    summary{ cursor:pointer; font-weight:700; color: var(--accent); display:flex; align-items:center; }
    summary::before { content: 'ï¼‹'; margin-right:6px; transition: transform 0.2s; }
    details[open] summary::before { content: 'ï¼'; }
    summary:hover{ color: var(--accent-hover) }

    .hint{ font-size:12px; color: var(--muted); margin-top:-6px; margin-bottom:6px }
    .limit{ display:none; margin-top:6px; padding:10px; background: rgba(255,92,92,.12); color:#ffd5d5; border:1px solid rgba(255,92,92,.45); border-radius:12px; font-weight:700; text-align:center; box-sizing: border-box; }
    .section-title{ font-weight:bold; color: var(--accent); margin-top:10px; }
    .accordion{ margin-left:0 }
    .panel{ overflow: hidden; max-height: 0; transition: max-height 280ms ease; }

    /* æ›´å¯¬çš„è£ç½®ï¼ˆå¹³æ¿/æ¡Œæ©Ÿï¼‰æœ€ä½³åŒ–ï¼šå¢åŠ å®¹å™¨å¯¬åº¦èˆ‡å­—è· */
    @media (min-width: 640px){ .container{ max-width: 640px; } }
    @media (min-width: 960px){ .container{ max-width: 720px; } }

    /* æ¸›å°‘å‹•ç•«ä»¥ç¬¦åˆç„¡éšœç¤™åå¥½ */
    @media (prefers-reduced-motion: reduce){
      * { transition: none !important; animation: none !important; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Enerpad AC è¡Œå‹•é›»æº<br>ä½¿ç”¨æ™‚é–“è©¦ç®—</h2>

    <label for="model">é¸æ“‡å‹è™Ÿï¼š</label>
    <select id="model">
      <option value="AC27KD">AC-27KDï¼ˆç´„ 91.6 Whï¼Œé€£çºŒä½¿ç”¨è² è¼‰100Wï¼‰</option>
      <option value="AC40K">AC-40Kï¼ˆç´„ 144.7 Whï¼Œé€£çºŒä½¿ç”¨è² è¼‰100Wï¼‰</option>
      <option value="MD42K">MD-42Kï¼ˆç´„ 149.0 Whï¼Œé€£çºŒä½¿ç”¨è² è¼‰200Wï¼‰</option>
      <option value="UPS55K">UPS-55Kï¼ˆç´„ 198.7 Whï¼Œé€£çºŒä½¿ç”¨è² è¼‰200Wï¼Œå…·ä¸æ–·é›»è¨­è¨ˆï¼‰</option>
      <option value="MD80K">MD-80Kï¼ˆç´„ 298.0 Whï¼Œé€£çºŒä½¿ç”¨è² è¼‰200Wï¼‰</option>
      <option value="AC160K">AC-160Kï¼ˆç´„ 576.0 Whï¼Œé€£çºŒä½¿ç”¨è² è¼‰200Wï¼‰</option>
    </select>

    <label for="capacity">å®¹é‡ï¼ˆWhï¼‰</label>
    <input id="capacity" type="number" readonly>
    <div class="hint">ç”±å‹è™Ÿè‡ªå‹•å¸¶å…¥ã€‚</div>

    <label for="power">è¼¸å…¥é è¨ˆä½¿ç”¨çš„é›»å™¨åŠŸç‡ (W)</label>
    <input type="number" id="power" placeholder="ä¾‹å¦‚ 65" inputmode="decimal" step="0.1">

    <div id="limit" class="limit" aria-live="polite" role="alert">âš ï¸ è¶…éé€£çºŒä½¿ç”¨è² è¼‰</div>

    <div class="actions">
      <button class="calculate" onclick="calculate()">è«‹è¼¸å…¥æ•¸å€¼ä¸¦é»æ“Šè¨ˆç®—</button>
      <button class="reset" onclick="resetForm()">é‡è¨­</button>
    </div>

    <div class="result" id="result" aria-live="polite">è«‹è¼¸å…¥æ•¸å€¼é€²è¡Œè¨ˆç®—</div>

    <p id='globalWarn' style='display:none; background:rgba(255,92,92,.15); color:#ff8080; padding:10px; border-radius:12px; border:1px solid rgba(255,92,92,.4); font-weight:700; text-align:center;'>âš ï¸ æ³¨æ„ï¼šæ­¤é¡é«˜åŠŸç‡é›»å™¨ä¸é©åˆæ­é… Enerpad AC è¡Œå‹•é›»æºã€‚</p>

    <details class="accordion" id="mainGuide">
      <summary>ğŸ“˜ æŸ¥çœ‹åŠŸç‡è¨ˆç®—å…¬å¼èˆ‡èªªæ˜</summary>
      <div class="panel">
        <p class="section-title">è¨ˆç®—å…¬å¼ï¼š</p>
        <p><b>å®¹é‡ (Wh) Ã— 0.8 Ã· åŠŸç‡ (W)</b></p>
        <p>ç‚ºä½•ä¹˜ 0.8ï¼Ÿä»¥é ç•™é€†è®Šæè€—èˆ‡å®‰å…¨é¤˜è£•ï¼Œåšä¿å®ˆä¼°ç®—ã€‚</p>

        <p class="section-title">å¦‚ä½•æ›ç®—åŠŸç‡ (W)ï¼š</p>
        <p><b>é›»å£“ (V) Ã— é›»æµ (A) = åŠŸç‡ (W)</b></p>
        <ul>
          <li>ä¾‹ 1ï¼š20V Ã— 3.25A = 65Wï¼ˆå¸¸è¦‹ç­†é›»å……é›»å™¨ï¼‰</li>
          <li>ä¾‹ 2ï¼š12V Ã— 1.5A â‰ˆ 18Wï¼ˆè·¯ç”±å™¨ï¼å°å®¶é›»ï¼‰</li>
          <li>ä¾‹ 3ï¼šéƒ¨åˆ†é›»ç†±å•†å“ç„¡æ¨™ç¤ºç¬é–“æœ€é«˜åŠŸç‡ï¼Œå¯ç”¨åŠŸç‡è¡¨åšç²¾æº–æ¸¬è©¦</li>
          <li>ä¾‹ 4ï¼šç­†é›»é€šå¸¸æ¨™ç¤ºæ•ˆèƒ½å…¨é–‹æ™‚çš„æœ€é«˜åŠŸç‡ï¼Œä½†ä¸€èˆ¬ä½¿ç”¨æ™‚åŠŸç‡è¼ƒä½</li>
        </ul>

        <p class="section-title">å¸¸è¦‹é›»å™¨åŠŸç‡ç¯„ä¾‹ï¼š</p>
        <details class="accordion">
          <summary>å¸¸è¦‹é›»å™¨åŠŸç‡</summary>
          <div class="panel">
            <ul>
              <li>LED ç‡ˆæ³¡ï¼š5W ~ 15W</li>
              <li>å°å†°ç®±ï¼ˆè¡Œå‹•å†°ç®±ï¼‰ï¼š50W ~ 100W</li>
              <li>ç­†è¨˜å‹é›»è…¦ï¼š45W ~ 250Wï¼ˆä¾å‹è™Ÿå·®ç•°ï¼‰</li>
              <li>é›»è¦–æ©Ÿï¼ˆ32~50å‹ï¼‰ï¼š60W ~ 150W</li>
              <li>DCç›´æµé›»æ‰‡ï¼š5W ~ 25Wï¼ˆè¼ƒå‚³çµ±é›»æ‰‡çœé›»ï¼‰</li>
            </ul>
          </div>
        </details>

        <p class="section-title">æ³¨æ„äº‹é …ï¼š</p>
        <p>ã€Œé€£çºŒä½¿ç”¨è² è¼‰ã€æŒ‡çš„æ˜¯è¡Œå‹•é›»æºå¯ä»¥é•·æ™‚é–“ç©©å®šè¼¸å‡ºçš„æœ€å¤§åŠŸç‡ã€‚<br>æœ‰äº›é›»å™¨æœƒåœ¨å•Ÿå‹•ç¬é–“ç”¢ç”ŸçŸ­æš«å³°å€¼åŠŸç‡ï¼Œå¯èƒ½é«˜æ–¼é€£çºŒä½¿ç”¨è² è¼‰ï¼Œä½†æ™‚é–“æ¥µçŸ­ï¼Œä¸ç­‰åŒæ–¼å¯é•·æ™‚é–“æ‰¿è¼‰ã€‚</p>

        <p class="section-title">é«˜åŠŸç‡å®¶é›»ç¯„ä¾‹ï¼š</p>
        <details class="accordion">
          <summary>é«˜åŠŸç‡å®¶é›»</summary>
          <div class="panel">
            <ul>
              <li>å¹é¢¨æ©Ÿï¼š1000W ~ 1800W</li>
              <li>å¾®æ³¢çˆï¼š800W ~ 1500W</li>
              <li>é›»ç£çˆï¼š1200W ~ 2000W</li>
              <li>é›»ç†±æ°´å£ºï¼š1000W ~ 1500W</li>
            </ul>
            <p style='background:rgba(255,92,92,.15); color:#ff8080; padding:10px; border-radius:12px; border:1px solid rgba(255,92,92,.4); font-weight:700;'>âš ï¸ æ³¨æ„ï¼šæ­¤é¡é«˜åŠŸç‡é›»å™¨ä¸é©åˆæ­é… Enerpad AC è¡Œå‹•é›»æºã€‚</p>
          </div>
        </details>

        <p class="hint">è‹¥åªçœ‹åˆ° mAï¼Œè«‹å…ˆæ›ç®—ç‚º Aï¼ˆå¦‚ 500mA = 0.5Aï¼‰ã€‚</p>
      </div>
    </details>
  </div>

  <script>
    const CAP = { AC27KD: 91.6, AC40K: 144.7, MD42K: 149.0, UPS55K: 198.7, MD80K: 298.0, AC160K: 576.0 };
    const MAXW = { AC27KD: 100, AC40K: 100, MD42K: 200, UPS55K: 200, MD80K: 200, AC160K: 200 };

    const modelSel = document.getElementById('model');
    const capacityInput = document.getElementById('capacity');
    const powerInput = document.getElementById('power');
    const resultDiv = document.getElementById('result');
    const limitDiv = document.getElementById('limit');
    const globalWarn = document.getElementById('globalWarn');

    function syncCapacity(){
      const id = modelSel.value;
      capacityInput.value = CAP[id].toFixed(1);
      checkLimit();
    }

    function checkLimit(){
      const id = modelSel.value;
      const w = parseFloat(powerInput.value);
      const max = MAXW[id];
      let over = !isNaN(w) && w > max;
      let msg = '';

      // é«˜åŠŸç‡å…¨åŸŸè­¦ç¤ºï¼š>200W é¡¯ç¤º
      if (!isNaN(w)) {
        globalWarn.style.display = w > 200 ? 'block' : 'none';
      } else {
        globalWarn.style.display = 'none';
      }

      if (!isNaN(w)) {
        if ((id === 'AC27KD' || id === 'AC40K') && w > 100 && w <= 200) {
          over = true;
          msg = `âš ï¸ è¶…éé€£çºŒä½¿ç”¨è² è¼‰ (<span class="highlight">æœ¬å‹è™Ÿé€£çºŒä½¿ç”¨è² è¼‰ ${max}W</span>)ã€‚å»ºè­°é¸æ“‡ MD-42K ä»¥ä¸Šå‹è™Ÿã€‚`;
        } else if (w > max) {
          msg = `âš ï¸ è¶…éé€£çºŒä½¿ç”¨è² è¼‰ (<span class="highlight">æœ¬å‹è™Ÿé€£çºŒä½¿ç”¨è² è¼‰ ${max}W</span>)`;
        }
      }

      limitDiv.style.display = over ? 'block' : 'none';
      if (over) {
        limitDiv.innerHTML = msg;
        resultDiv.innerHTML = msg;
      }
      return over;
    }

    function calculate() {
      const wh = parseFloat(capacityInput.value);
      const w = parseFloat(powerInput.value);

      if (isNaN(w)) {
        alert(' è«‹è¼¸å…¥æ•¸å­—ï¼');
        return;
      }

      // åŒæ­¥é«˜åŠŸç‡å…¨åŸŸè­¦ç¤º
      globalWarn.style.display = !isNaN(w) && w > 200 ? 'block' : 'none';

      if (isNaN(wh) || isNaN(w) || w <= 0) {
        resultDiv.innerHTML = ' è«‹è¼¸å…¥æ­£ç¢ºæ•¸å€¼';
        return;
      }
      if (checkLimit()) return;
      const hours = (wh * 0.8) / w;
      const hr = Math.floor(hours);
      const min = Math.round((hours - hr) * 60);
      resultDiv.innerHTML = ` é ä¼°å¯ä½¿ç”¨æ™‚é–“ï¼š<strong>${hr} å°æ™‚ ${String(min).padStart(2,'0')} åˆ†</strong><br><span class="highlight">æœ¬å‹è™Ÿé€£çºŒä½¿ç”¨è² è¼‰ï¼š${MAXW[modelSel.value]}W</span>`;
    }

    function resetForm() {
      modelSel.selectedIndex = 0; syncCapacity();
      powerInput.value = ''; limitDiv.style.display='none';
      resultDiv.innerHTML = 'è«‹è¼¸å…¥æ•¸å€¼é€²è¡Œè¨ˆç®—';
      globalWarn.style.display = 'none';
    }

    // Accordion æ»‘å‹•å‹•ç•«ï¼šä¾å…§å®¹å‹•æ…‹é«˜åº¦éæ¸¡
    function setupAccordion(){
      const accordions = document.querySelectorAll('details.accordion');
      accordions.forEach(dtl => {
        const panel = dtl.querySelector('.panel');
        if (!panel) return;
        const animate = () => {
          if (dtl.open) {
            panel.style.maxHeight = panel.scrollHeight + 'px';
          } else {
            panel.style.maxHeight = 0;
          }
        };
        // åˆå§‹ç‹€æ…‹èˆ‡åˆ‡æ›
        animate();
        dtl.addEventListener('toggle', animate);
        // è¦–çª—å°ºå¯¸æ”¹è®Šæ™‚æ›´æ–°
        window.addEventListener('resize', () => { if (dtl.open) panel.style.maxHeight = panel.scrollHeight + 'px'; });
      });
    }

    modelSel.addEventListener('change', syncCapacity);
    powerInput.addEventListener('input', checkLimit);
    setupAccordion();
    syncCapacity();
  </script>
</body>
</html>
